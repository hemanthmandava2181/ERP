
<script
	src="/erp/files/assets/js/erp-scripts/HRMS/employeeemployeeselfserviece/attendanceandTimesheet.js"></script>
	
<link rel="stylesheet" type="text/css"
	href="/erp/files/bower_components/jquery.steps/css/jquery.steps.css">



<div id="TimeandattendanceDiv"
	data-ng-controller="attendanceandTimeSheet">
	<!-- BreadCrumb Start -->
	<div class="row">
		<div class="col-sm-12">
			<div class="card">
				<div class="card-block caption-breadcrumb">
					<div class="breadcrumb-header">
						<h5>Attendance & Timesheet</h5>
					</div>
					<div class="page-header-breadcrumb">
						<ul class="breadcrumb-title">
							<li class="breadcrumb-item"><a href="#!"> <i
									class="ti-home"></i>
							</a></li>
							<li class="breadcrumb-item"><a href="#!">Employee Self
									Services</a></li>
							<li class="breadcrumb-item"><a href="#!">Time &
									Attendance</a></li>
							<li class="breadcrumb-item"><a href="#!">Attendance &
									Timesheet</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- BreadCrumb End -->
	<!-- Content Starts Here -->
	<div class="row">
		<div class="col-sm-12">
			<div class="card">
				<div class="card-body">
					<div id="wizarda">
						<section>
							<form class="wizard-form" id="basic-forms" action="#">
								<h3>Attendance</h3>
								<fieldset>
									<h5>Attendance & Timesheet</h5>
									<h7>&nbsp;</h7>
									<div class="panel panel-primary" style="border-color: #4099ff;">
										<div class="panel-body p-3">
											<div class="row">
												<div
													class="col-sm-12 col-md-2 col-lg-2 col-xl-2 col-xs-12 mt-1">
													<button type="button" class="btn btn-primary" id="removebtn"
										data-ng-click="getsearch(data.object);">Login
														Time</button>
												</div>
												<div
													class="col-sm-12 col-md-3 col-lg-3 col-xl-3 col-xs-12 mt-1">
													<input type="text" class="form-control"
										data-ng-model="data.object.login_time" disabled placeholder="" />
												</div>
											
												<div
													class="col-sm-12 col-md-2 col-lg-2 col-xl-2 col-xs-12 mt-1">
														<button type="button" class="btn btn-primary" id="removebtn"
										data-ng-click="getsearch(data.object);">Logout
														Time</button>
												</div>
												<div
													class="col-sm-12 col-md-3 col-lg-3 col-xl-3 col-xs-12 mt-1">
													<input type="text" class="form-control"
										data-ng-model="data.object.logout_time" disabled placeholder="" />
												</div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-sm-12 mt-1 text-center">
											<button type="button" class="btn btn-primary" id="removebtn"
					data-ng-click="getsearch(data.object);" style="margin-left: 45%">Search</button>
										</div>
									</div>
								</fieldset>
								<h3>Timesheet</h3>
								<fieldset>
									<div class="panel panel-primary" style="border-color: #4099ff;">
										<div class="panel-body p-3">
											<div class="row">
												<div
													class="col-sm-12 col-md-2 col-lg-2 col-xl-2 col-xs-12 mt-1">
													<label class="font-weight-bold">Today
														Login&nbsp;&nbsp;<span class="text-danger">*</span>
													</label>
												</div>
												<div
													class="col-sm-12 col-md-3 col-lg-3 col-xl-3 col-xs-12 mt-1">
													<input
											class="form-control" type="text" id="pincodeId" disabled
											data-ng-model="data.object.login_time" placeholder="" />
												</div>
											
												<div
													class="col-sm-12 col-md-2 col-lg-2 col-xl-2 col-xs-12 mt-1">
													<label class="font-weight-bold">Today
														Logout&nbsp;&nbsp;<span class="text-danger">*</span>
													</label>
												</div>
												<div
													class="col-sm-12 col-md-3 col-lg-3 col-xl-3 col-xs-12 mt-1">
													<input
											class="form-control" type="text" id="pincodeId" disabled
											data-ng-model="data.object.logout_time" placeholder="" />
												</div>
											</div>
										</div>
									</div>
									<h5>&nbsp;</h5>
									<h5>Timesheet</h5>
									<br>
									<div class="panel panel-primary" style="border-color: #4099ff;">
										<div class="panel-body p-3">
											<div class="row">
												<div
													class="col-sm-12 col-md-3 col-lg-3 col-xl-3 col-xs-12 mt-1">
													<label class="font-weight-bold">Time Sheet
														Date&nbsp;<span class="text-danger">*</span>
													</label> <input
										class="form-control" type="date" id="timesheetDate"
										data-ng-model="data.object.timesheet_date" placeholder="" />
												</div>
												<div
													class="col-sm-12 col-md-1 col-lg-1 col-xl-1 col-xs-12 mt-1">
													<label>&nbsp;</label>
												</div>
												<div
													class="col-sm-12 col-md-4 col-lg-4 col-xl-4 col-xs-12 mt-1">
													<label class="font-weight-bold">Location&nbsp;<span
														class="text-danger">*</span></label>  <input
										class="form-control" type="text" id="pincodeId"
										data-ng-model="data.object.location" placeholder="" />
												</div>
												<div
													class="col-sm-12 col-md-3 col-lg-3 col-xl-3 col-xs-12 mt-1">
													<label class="font-weight-bold">Duration</label>  <input
										class="form-control" type="text" id="duration" disabled
										placeholder="" data-ng-model="data.object.duration" />
												</div>
											</div>
										</div>
									</div>
									<h6>&nbsp;</h6>
									<div class="panel panel-primary" style="border-color: #4099ff;">
										<div class="panel-body p-3">
											<div class="dt-responsive table-responsive">
												<table id="simpletable"
													class="table table-striped table-bordered nowrap">
													<thead>
														<tr>
															<th>Task</th>
															<th>Description</th>
															<th>Start Time</th>
															<th>End Time</th>
															<th>Duration</th>
															<th>Action</th>
														</tr>
													</thead>
													<tbody>
														<tr>
							<td>
								<input class="form-control" type="text" id="task" data-ng-model="data.object.task"/>
							</td>
							<td>
								<textarea class="form-control" type="text" data-ng-model="data.object.description"></textarea>
							</td>
							<td>
								<input class="form-control" type="time" id="starttime" name = "starttime"  data-ng-model="data.object.start_time" />
							</td>
							<td>
								<input class="form-control" type="time" id="endtime" name = "endtime" data-ng-model="data.object.end_time" />
							</td>
							<td>
								<input
										class="form-control" type="text" id="duration1" disabled placeholder="" />
							</td>
						</tr>
													</tbody>
												</table>
											</div>
											<div class="row">
												<div
													class="col-sm-12 col-md-6 col-lg-6 col-xl-6 col-xs-12 mt-1">
													<button class="btn btn-grd-success float-right hor-grd">Add
														Task</button>
												</div>
												<div
													class="col-sm-12 col-md-6 col-lg-6 col-xl-6 col-xs-12 mt-1">
													<button class="btn btn-primary" data-ng-click="Insertdata(data.object);">Save</button>
												</div>
											</div>
										</div>
									</div>

								</fieldset>
							</form>
						</section>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Content Ends Here -->
</div>





<script
	src="/erp/files/bower_components/jquery.cookie/js/jquery.cookie.js "></script>
<script
	src="/erp/files/bower_components/jquery.steps/js/jquery.steps.js "></script>
<script
	src="/erp/files/bower_components/jquery-validation/js/jquery.validate.js "></script>

<script
	src="../../../cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js "></script>
<script
	src="../../../cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.min.js "></script>
<script src="/erp/files/assets/pages/form-validation/validate.js "></script>
<script
	src="/erp/files/assets/pages/forms-wizard-validation/form-wizard.js "></script>



	
<script>
jQuery(document).ready(
		function() {
			angular.bootstrap(jQuery("#TimeandattendanceDiv"),[ 'attendanceandTimesheet' ]);
		});
jQuery("#submit").click(function() {
	$("#button").show();  
	$("#change").hide();
	$("#instructions").show();
	$("#replaceDiv").show();
});
</script>
<script>
	var start = document.getElementById("starttime").value;
	var end = document.getElementById("endtime").value;
	
	document.getElementById("starttime").onchange = function() {diff(start,end)};
	document.getElementById("endtime").onchange = function() {diff(start,end)};
	
	
	function diff(start, end) {
	    start = document.getElementById("starttime").value; //to update time value in each input bar
	    end = document.getElementById("endtime").value; //to update time value in each input bar
	    
	    start = start.split(":");
	    end = end.split(":");
	    var startDate = new Date(0, 0, 0, start[0], start[1], 0);
	    var endDate = new Date(0, 0, 0, end[0], end[1], 0);
	    var diff = endDate.getTime() - startDate.getTime();
	    var hours = Math.floor(diff / 1000 / 60 / 60);
	    diff -= hours * 1000 * 60 * 60;
	    var minutes = Math.floor(diff / 1000 / 60);
	
	    return (hours < 9 ? "0" : "") + hours + ":" + (minutes < 9 ? "0" : "") + minutes;
	}
	
	setInterval(function(){document.getElementById("duration").value = diff(start, end);}, 1000); //to update time every second (1000 is 1 sec interval and function encasing original code you had down here is because setInterval only reads functions) You can change how fast the time updates by lowering the time interval
	setInterval(function(){document.getElementById("duration1").value = diff(start, end);}, 1000);
</script>



